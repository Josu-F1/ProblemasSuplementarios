/* ---------- Diseño base / tokens ---------- */
:root{
  --bg: #f8fafc;
  --card: #ffffff;
  --text: #0f172a;
  --muted: #64748b;
  --primary: #0ea5e9;
  --primary-700:#0284c7;
  --success: #16a34a;
  --danger: #dc2626;
  --grid: #d4d4d8;
  --grid-strong:#0f172a;
  --fixed-bg:#f1f5f9;
  --cell-text:#1f4aff;
  --shadow: 0 12px 30px rgba(2,6,23,.08), 0 4px 8px rgba(2,6,23,.06);
  --radius: 14px;
  --cell: 56px;           /* tamaño de celda por defecto (desktop) */
}

@media (max-width: 900px){
  :root{ --cell: 52px; }
}
@media (max-width: 720px){
  :root{ --cell: 46px; }
}
@media (max-width: 520px){
  :root{ --cell: 40px; }
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220;
    --card:#0f172a;
    --text:#e2e8f0;
    --muted:#94a3b8;
    --primary:#38bdf8;
    --primary-700:#0891b2;
    --success:#22c55e;
    --danger:#f87171;
    --grid:#1f2937;
    --grid-strong:#e2e8f0;
    --fixed-bg:#111827;
    --cell-text:#93c5fd;
    --shadow: 0 10px 24px rgba(0,0,0,.35);
  }
}

/* ---------- Layout ---------- */
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: ui-sans-serif, system-ui, "Segoe UI", Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

.container{
  max-width: 860px;
  margin: 28px auto 60px;
  padding: 0 18px;
}

h1{
  font-size: clamp(28px, 3vw, 36px);
  margin: 4px 0 12px;
  letter-spacing:.2px;
}

/* ---------- Toolbar / botones ---------- */
.toolbar{
  display:flex; gap:10px; align-items:center; flex-wrap:wrap;
  margin: 10px 0 18px;
}

.btn{
  appearance:none;
  padding:10px 14px;
  border:1px solid color-mix(in oklab, var(--muted) 35%, transparent);
  background:var(--card);
  color:var(--text);
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  transition: transform .06s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
  box-shadow: 0 2px 0 rgba(2,6,23,.06);
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 14px rgba(2,6,23,.10); }
.btn:active{ transform: translateY(0); box-shadow:none; }
.btn:disabled{ opacity:.6; cursor:not-allowed; box-shadow:none; }

.btn.primary{
  background: var(--primary);
  border-color: var(--primary);
  color: #fff;
}
.btn.primary:hover{ background: var(--primary-700); border-color: var(--primary-700); }

.status{ color:var(--muted); font-weight:600; }

/* ---------- Card del tablero ---------- */
#boardContainer{
  background: var(--card);
  border-radius: var(--radius);
  padding: 18px;
  box-shadow: var(--shadow);
}

/* ---------- Tabla Sudoku ---------- */
.sudoku-grid{
  border-collapse: separate; 
  border-spacing: 0;
  margin: 0 auto;
  user-select: none;
}

.sudoku-grid td{
  padding:0;
  border:1px solid var(--grid);
  position: relative;
}

/* Bordes gruesos 3x3 con outline para evitar dobles líneas */
.sudoku-grid tr:nth-child(3n) td{ border-bottom: 3px solid var(--grid-strong); }
.sudoku-grid td:nth-child(3n){ border-right: 3px solid var(--grid-strong); }
.sudoku-grid tr:first-child td{ border-top: 3px solid var(--grid-strong); }
.sudoku-grid td:first-child{ border-left: 3px solid var(--grid-strong); }

/* ---------- Inputs de celda ---------- */
.cell-input{
  width: var(--cell);
  height: var(--cell);
  display: block;
  text-align: center;
  font-size: calc(var(--cell) * .48);
  line-height: 1;
  font-weight: 800;
  border: none;
  outline: none;
  background: #fff;
  color: var(--cell-text);
  transition: background .15s ease, box-shadow .15s ease, transform .05s ease;
  border-radius: 6px;
}

@media (prefers-color-scheme: dark){
  .cell-input{ background:#0b1220; }
}

.cell-input:hover{ box-shadow: inset 0 0 0 2px color-mix(in oklab, var(--primary) 35%, transparent); }
.cell-input:focus{
  box-shadow: inset 0 0 0 2px var(--primary), 0 0 0 3px color-mix(in oklab, var(--primary) 35%, transparent);
  transform: translateZ(0);
}

/* Celdas dadas (fijas) */
.cell-input.fixed{
  background: var(--fixed-bg);
  color: var(--text);
  font-weight: 900;
}

/* Feedback de validación */
.cell-input.invalid{
  background: color-mix(in oklab, var(--danger) 18%, #fff);
  box-shadow: inset 0 0 0 2px var(--danger);
  animation: shake .18s ease-in-out 0s 2;
}
.cell-input.valid{
  background: color-mix(in oklab, var(--success) 18%, #fff);
  box-shadow: inset 0 0 0 2px var(--success);
}

/* Sutil sombreado alterno por bloques 3x3 (solo para vacías no fijas) */
.sudoku-grid tr:nth-child(odd) td:nth-child(odd) .cell-input:not(.fixed):placeholder-shown,
.sudoku-grid tr:nth-child(even) td:nth-child(even) .cell-input:not(.fixed):placeholder-shown{
  background: color-mix(in oklab, var(--card) 85%, #eeeeee);
}
@media (prefers-color-scheme: dark){
  .sudoku-grid tr:nth-child(odd) td:nth-child(odd) .cell-input:not(.fixed):placeholder-shown,
  .sudoku-grid tr:nth-child(even) td:nth-child(even) .cell-input:not(.fixed):placeholder-shown{
    background: #0b1220;
  }
}

/* Animaciones */
@keyframes shake{
  0%{ transform: translateX(0) }
  25%{ transform: translateX(-3px) }
  50%{ transform: translateX(3px) }
  75%{ transform: translateX(-2px) }
  100%{ transform: translateX(0) }
}
